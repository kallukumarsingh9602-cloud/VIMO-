<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Withdrawal - GSM Platform</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Simple Header -->
    <header class="simple-header">
        <button class="btn-back-header" onclick="window.history.back()">
            <i class="fas fa-arrow-left"></i>
        </button>
        <h2>Withdrawal</h2>
        <button class="btn-history" onclick="window.location.href='transactions.html'">
            <i class="fas fa-history"></i>
        </button>
    </header>
    <!-- Withdrawal Section -->
    <section class="withdrawal-section">
        <div class="container-small">
            <!-- Balance Display -->
            <div class="balance-card withdrawal">
                <div class="balance-info">
                    <p>Available Balance</p>
                    <h2 id="availableBalance">$0.00</h2>
                </div>
                <i class="fas fa-money-bill-wave"></i>
            </div>
            <!-- Bank Account Selection/Add -->
            <div class="bank-section">
                <div class="section-header">
                    <h3>Select Bank Account</h3>
                    <button class="btn-add-bank" onclick="window.location.href='add-bank.html'">
                        <i class="fas fa-plus"></i> Add New
                    </button>
                </div>
                
                <div class="bank-cards">
                    <div class="bank-card selected" onclick="selectBank('bank1')">
                        <i class="fas fa-university"></i>
                        <div class="bank-details">
                            <h4>State Bank of India</h4>
                            <p>XXXX XXXX XXXX 1234</p>
                            <span class="account-holder">John Doe</span>
                        </div>
                        <i class="fas fa-check-circle selected-icon"></i>
                    </div>
                    
                    <div class="empty-bank" id="emptyBank" style="display: none;">
                        <i class="fas fa-university"></i>
                        <p>No bank account added</p>
                        <button class="btn-add-first" onclick="window.location.href='add-bank.html'">
                            Add Bank Account
                        </button>
                    </div>
                </div>
            </div>
            <!-- Withdrawal Amount -->
            <div class="withdrawal-amount">
                <h3>Enter Withdrawal Amount</h3>
                <div class="amount-input-section">
                    <div class="input-with-icon large">
                        <i class="fas fa-dollar-sign"></i>
                        <input type="number" id="withdrawalAmount" placeholder="Enter amount" min="10" oninput="updateWithdrawalFee()">
                    </div>
                    <div class="quick-amounts">
                        <button onclick="setWithdrawAmount(100)">$100</button>
                        <button onclick="setWithdrawAmount(500)">$500</button>
                        <button onclick="setWithdrawAmount(1000)">$1000</button>
                        <button onclick="setWithdrawAmount('all')">All</button>
                    </div>
                </div>
            </div>
            <!-- Withdrawal Summary -->
            <div class="withdrawal-summary">
                <div class="summary-row">
                    <span>Withdrawal Amount:</span>
                    <span id="withdrawAmount">$0.00</span>
                </div>
                <div class="summary-row fee">
                    <span>Processing Fee (2%):</span>
                    <span id="processingFee">-$0.00</span>
                </div>
                <div class="summary-row total">
                    <span>You will receive:</span>
                    <span id="receiveAmount">$0.00</span>
                </div>
            </div>
            <!-- Transaction Password -->
            <div class="transaction-password">
                <label><i class="fas fa-lock"></i> Transaction Password</label>
                <div class="password-input">
                    <input type="password" id="transPassword" placeholder="Enter transaction password" required>
                    <i class="fas fa-eye toggle-password" onclick="togglePassword('transPassword')"></i>
                </div>
                <a href="set-transaction-password.html" class="link-text">Forgot Password?</a>
            </div>
            <!-- Withdraw Button -->
            <button class="btn-withdraw" onclick="processWithdrawal()">
                <i class="fas fa-money-bill-wave"></i> Withdraw Now
            </button>
            <!-- Important Notes -->
            <div class="important-notes">
                <h4><i class="fas fa-info-circle"></i> Withdrawal Guidelines</h4>
                <ul>
                    <li>Minimum withdrawal amount is $10</li>
                    <li>Maximum withdrawal per transaction: $50,000</li>
                    <li>Processing time: 1-3 business days</li>
                    <li>Processing fee: 2% of withdrawal amount</li>
                    <li>Bank account must be verified</li>
                    <li>Daily withdrawal limit: $100,000</li>
                </ul>
            </div>
            <!-- Withdrawal History -->
            <div class="withdrawal-history">
                <h3>Recent Withdrawals</h3>
                <div class="history-list">
                    <div class="history-item pending">
                        <div class="history-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="history-details">
                            <h4>$500.00</h4>
                            <p>2024-02-07 18:30</p>
                            <span class="status-badge pending">Pending</span>
                        </div>
                    </div>
                    <div class="history-item success">
                        <div class="history-icon">
                            <i class="fas fa-check"></i>
                        </div>
                        <div class="history-details">
                            <h4>$1,000.00</h4>
                            <p>2024-02-06 14:20</p>
                            <span class="status-badge success">Completed</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script type="module" src="firebase-config.js"></script>
    <script src="withdrawal.js"></script>
</body>
</html>
